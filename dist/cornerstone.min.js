var cornerstoneCore=function(a){function b(a){for(var b=[],c=a.minPixelValue;c<=a.maxPixelValue;c++){var d=c*a.slope+a.intercept;voiLutValue=255*((d-a.windowCenter)/a.windowWidth+.5);var e=Math.min(Math.max(voiLutValue,0),255);b[c]=Math.round(e)}return b}return void 0===a&&(a={}),a.generateLut=b,a}(cornerstoneCore),cornerstoneCore=function(a){function b(){for(var a={minPixelValue:0,maxPixelValue:257,slope:1,intercept:0,windowCenter:127,windowWidth:256,storedPixelData:[],rows:256,columns:256},b=0,c=0;c<a.rows;c++)for(var d=0;d<a.columns;d++)a.storedPixelData[b]=0,b++;return a}return void 0===a&&(a={}),a.image=b,a}(cornerstoneCore),cornerstoneCore=function(a){function b(a,b){var c=new XMLHttpRequest;c.open("get",a,!0),c.responseType="arraybuffer",c.onload=function(){b(c.response)},c.send()}return void 0===a&&(a={}),a.readPixelData=b,a}(cornerstoneCore),cornerstoneCore=function(a){function b(a,b,c){for(var d=0,e=0,f=0;f<a.rows;f++)for(var g=0;g<a.columns;g++){var h=a.storedPixelData[e++],i=b[h];c[d++]=i,c[d++]=i,c[d++]=i,c[d++]=255}}return void 0===a&&(a={}),a.storedPixelDataToCanvasImageData=b,a}(cornerstoneCore),cornerstone=function(a){function b(a){for(var b=0;b<g.length;b++)if(g[b].element==a)return g[b];return void 0}function c(c){var d=b(c),e=30,f=d.canvas.getContext("2d");f.fillStyle="black",f.fillRect(0,0,d.canvas.width,d.canvas.height),f.save(),f.scale(d.viewport.scale,d.viewport.scale),f.translate(-d.image.width/2,-d.image.height/2),f.translate(d.viewport.centerX,d.viewport.centerY),h.windowCenter=d.viewport.windowCenter,h.windowWidth=d.viewport.windowWidth;var g=a.generateLut(h),i=j.getContext("2d"),k=i.createImageData(h.columns,h.rows);a.storedPixelDataToCanvasImageData(h,g,k.data),i.putImageData(k,0,0),f.drawImage(j,0,0),f.restore(),f.fillStyle="white",f.fillText(d.ids.studyId,10,e),e+=30,f.fillText(d.ids.imageId,10,e),e+=30;for(var l in d.viewport){var m=l+" = "+d.viewport[l];f.fillText(m,10,e),e+=30}}function d(a,b){var c=a.getAttribute(b);return void 0===c?void 0:c}function e(){for(var a=document.querySelectorAll("[data-cornerstoneEnabled]"),b=0;b<a.length;b++){var c=a[b],e=c.getAttribute("data-cornerstoneStudyId"),g=c.getAttribute("data-cornerstoneImageId"),h={scale:d(c,"data-cornerstoneViewportScale"),centerX:d(c,"data-cornerstoneViewportCenterX"),centerY:d(c,"data-cornerstoneViewportCenterY"),windowWidth:d(c,"data-cornerstoneViewportWindowWidth"),windowCenter:d(c,"data-cornerstoneViewportWindowCenter")};f.enable(c,e,g,h)}}var f={},g=[],h=a.image(),i="../pixels.raw";a.readPixelData(i,function(a){for(var b=new Uint16Array(a),d=0,e=0;256>e;e++)for(var f=0;256>f;f++)h.storedPixelData[d]=b[d++];c(g[0].element)});var j=document.createElement("canvas");return j.width=1024,j.height=1024,f.config=function(){},f.enable=function(a,b,d,e){var f=document.createElement("canvas");f.width=a.clientWidth,f.height=a.clientHeight,a.appendChild(f);var h={scale:1,centerX:256,centerY:256,windowWidth:256,windowCenter:128};if(e)for(var i in e)null!==e[i]&&(h[i]=e[i]);var j={element:a,canvas:f,ids:{studyId:b,imageId:d},image:{width:512,height:512},viewport:h};g.push(j),c(a)},f.showImage=function(a,d,e,f){if(enabledElement=b(a),enabledElement.ids.studyId=d,enabledElement.ids.imageId=e,f)for(var g in f)null!==f[g]&&(enabledElement.viewport[g]=f[g]);c(a)},f.setViewport=function(a,d){enabledElement=b(a),enabledElement.viewport=d,c(a)},f.getViewport=function(a){return b(a).viewport},e(),f}(cornerstoneCore);