var cornerstoneCore=function(a){function b(b,d){var e=b.canvas.getContext("2d");e.fillStyle="black",e.fillRect(0,0,b.canvas.width,b.canvas.height),e.save(),e.translate(b.canvas.width/2,b.canvas.height/2),e.scale(b.viewport.scale,b.viewport.scale),e.translate(b.viewport.centerX,b.viewport.centerY),d.windowCenter=b.viewport.windowCenter,d.windowWidth=b.viewport.windowWidth;var f=a.generateLut(d),g=c.getContext("2d"),h=g.createImageData(d.columns,d.rows);a.storedPixelDataToCanvasImageData(d,f,h.data),g.putImageData(h,0,0),e.drawImage(c,0,0,d.columns,d.rows,-d.columns/2,-d.rows/2,d.columns,d.rows),e.translate(-d.columns/2,-d.rows/2);var i=new CustomEvent("CornerstoneImageRendered",{detail:{canvasContext:e,viewport:b.viewport,image:b.image,element:b.element},bubbles:!1,cancelable:!1});b.element.dispatchEvent(i),e.restore()}void 0===a&&(a={});var c=document.createElement("canvas");return c.width=1024,c.height=1024,a.drawImage=b,a}(cornerstoneCore),cornerstoneCore=function(a){function b(a){for(var b=[],c=a.minPixelValue;c<=a.maxPixelValue;c++){var d=c*a.slope+a.intercept;voiLutValue=255*((d-a.windowCenter)/a.windowWidth+.5);var e=Math.min(Math.max(voiLutValue,0),255);b[c]=Math.round(e)}return b}return void 0===a&&(a={}),a.generateLut=b,a}(cornerstoneCore),cornerstoneCore=function(a){function b(a,b){var c=new XMLHttpRequest;c.open("get",a,!0),c.responseType="arraybuffer",c.onload=function(){b(c.response)},c.send()}return void 0===a&&(a={}),a.readPixelData=b,a}(cornerstoneCore),cornerstoneCore=function(a){function b(a,b,c){for(var d=0,e=0,f=0;f<a.rows;f++)for(var g=0;g<a.columns;g++){var h=a.storedPixelData[e++],i=b[h];c[d++]=i,c[d++]=i,c[d++]=i,c[d++]=255}}return void 0===a&&(a={}),a.storedPixelDataToCanvasImageData=b,a}(cornerstoneCore),cornerstone=function(a){function b(b,c,d){var e=document.createElement("canvas");e.width=b.clientWidth,e.height=b.clientHeight,b.appendChild(e);var f=a.loadImage(c),g={scale:1,centerX:0,centerY:0,windowWidth:f.windowWidth,windowCenter:f.windowCenter},h=e.height/f.rows,i=e.width/f.columns;if(g.scale=h>i?i:h,d)for(var j in d)null!==d[j]&&(g[j]=d[j]);var k={element:b,canvas:e,ids:{imageId:c},image:f,viewport:g};a.addEnabledElement(k),a.updateImage(b);var l=new CustomEvent("CornerstoneViewportUpdated",{detail:{viewport:g,element:b},bubbles:!1,cancelable:!1});b.dispatchEvent(l)}return void 0===a&&(a={}),a.enable=b,a}(cornerstone,cornerstoneCore),cornerstone=function(a){function b(a){for(var b=0;b<d.length;b++)if(d[b].element==a)return d[b];return void 0}function c(a){d.push(a)}void 0===a&&(a={});var d=[];return a.getEnabledElement=b,a.addEnabledElement=c,a}(cornerstone,cornerstoneCore),cornerstone=function(a){function b(b){var c=a.getEnabledElement(b),d=c.canvas.height/c.image.rows,e=c.canvas.width/c.image.columns;c.viewport.scale=d>e?e:d,c.viewport.centerX=0,c.viewport.centerY=0,a.updateImage(b)}return void 0===a&&(a={}),a.fitToWindow=b,a}(cornerstone,cornerstoneCore),cornerstone=function(a){function b(a){var b=a.indexOf(":"),c=a.substring(0,b),d=g[c];if(void 0===d||null===d){if(void 0!==f){var e=f(a);return e}return void 0}var e=d(a);return e}function c(a){if(void 0===h[a]){var c=b(a);return h[a]=c,c}return h[a]}function d(a,b){g[a]=b}function e(a){var b=f;return f=a,b}void 0===a&&(a={});var f,g={},h={};return a.loadImage=c,a.registerImageLoader=d,a.registerUnknownImageLoader=e,a}(cornerstone,cornerstoneCore),cornerstone=function(a){function b(a,b){var c=a.getAttribute(b);return void 0===c?void 0:c}function c(){for(var c=document.querySelectorAll("[data-cornerstoneEnabled]"),d=0;d<c.length;d++){var e=c[d],f=e.getAttribute("data-cornerstoneImageId"),g={scale:b(e,"data-cornerstoneViewportScale"),centerX:b(e,"data-cornerstoneViewportCenterX"),centerY:b(e,"data-cornerstoneViewportCenterY"),windowWidth:b(e,"data-cornerstoneViewportWindowWidth"),windowCenter:b(e,"data-cornerstoneViewportWindowCenter")};a.enable(e,f,g)}}void 0===a&&(a={});var d=window.onload;return window.onload=function(){"function"==typeof d&&d(),c()},a.enableAllElements=c,a}(cornerstone,cornerstoneCore),cornerstone=function(a){return void 0===a&&(a={}),a.showImage=function(b,c,d){if(enabledElement=a.getEnabledElement(b),enabledElement.ids.imageId=c,enabledElement.image=a.loadImage(c),d)for(var e in d)null!==d[e]&&(enabledElement.viewport[e]=d[e]);a.updateImage(b)},a}(cornerstone,cornerstoneCore),cornerstone=function(a,b){function c(c){var d=a.getEnabledElement(c),e=d.image;b.drawImage(d,e)}return void 0===a&&(a={}),a.updateImage=c,a}(cornerstone,cornerstoneCore),cornerstone=function(a){function b(b,c){enabledElement=a.getEnabledElement(b),c.windowWidth<1&&(c.windowWidth=1),c.scale<1e-4&&(c.scale=.25),enabledElement.viewport=c,a.updateImage(b);var d=new CustomEvent("CornerstoneViewportUpdated",{detail:{viewport:c,element:b,image:enabledElement.image},bubbles:!1,cancelable:!1});b.dispatchEvent(d)}function c(b){return a.getEnabledElement(b).viewport}function d(b,c,d){var e=a.getEnabledElement(b),f=b.getBoundingClientRect(),g=c-f.left,h=d-f.top,i=g-f.width/2,j=h-f.height/2,k=e.viewport,l=i/k.scale,m=j/k.scale,n=l-k.centerX,o=m-k.centerY;return n+=e.image.columns/2,o+=e.image.rows/2,{x:n,y:o}}return void 0===a&&(a={}),a.getViewport=c,a.setViewport=b,a.pageToImage=d,a}(cornerstone,cornerstoneCore);!function(a){function b(){for(var a={minPixelValue:0,maxPixelValue:255,slope:1,intercept:0,windowCenter:127,windowWidth:256,storedPixelData:[],rows:128,columns:256,color:!1,columnPixelSpacing:1,rowPixelSpacing:1},b=0,c=Math.round(255*Math.random()),d=0;d<a.rows;d++)for(var e=0;e<a.columns;e++)a.storedPixelData[b]=(e+c)%256,b++;return a}return a.registerImageLoader("test",b),a}(cornerstone),function(a){function b(){for(var a={minPixelValue:0,maxPixelValue:255,slope:1,intercept:0,windowCenter:127,windowWidth:256,storedPixelData:[],rows:256,columns:256,color:!1,columnPixelSpacing:1,rowPixelSpacing:1},b=0,c=0;c<a.rows;c++)for(var d=0;d<a.columns;d++)a.storedPixelData[b]=0,b++}a.registerUnknownImageLoader(b)}(cornerstone);