<!DOCTYPE HTML>
<html>
<head>
    <!-- twitter bootstrap CSS stylesheet - not required by cornerstone -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container">

<h1>
    zoompan/index.html
</h1>

This is an example of interactive zoom and pan

<br>
<br>

In this example, the zoom can be changed via the mouse wheel or the buttons on the screen.
Panning is done via left mouse click dragging.  Note that the core cornerstone library does
not specify any interaction paradigm and allows any interaction paradigm to be implemented
by the developer
<br>
<br>


<div id="dicomImage" style="width:512px;height:512px">
</div>

<button id="zoomIn" type="button" class="btn btn-default">Zoom In</button>
<button id="zoomOut" type="button" class="btn btn-default">Zoom Out</button>

</div>
</body>
<!-- include the cornerstone library -->
<script src="../../dist/cornerstone.js"></script>

<!-- jquery - included to make things easier to demo, not needed or used by cornerstone -->
<script src="https://code.jquery.com/jquery-2.1.0.min.js"></script>

<script>

    // image enable the dicomImage element
    var studyId = '1.3.12.2.1107.5.2.32.35020.30000011062212111306200000003';
    var imageId = '1.3.12.2.1107.5.2.32.35020.2011062208172724415309288';
    var element = $('#dicomImage').get(0);
    cornerstone.enable(element, studyId, imageId);

    // Add event handlers to zoom the image in and out
    $('#zoomIn').click(function(e) {
        var viewport = cornerstone.getViewport(element);
        viewport.scale += 0.25;
        cornerstone.setViewport(element, viewport);
    });
    $('#zoomOut').click(function(e) {
        var viewport = cornerstone.getViewport(element);
        viewport.scale -= 0.25;
        cornerstone.setViewport(element, viewport);
    });

    // add event handlers to pan image on mouse move
    $('#dicomImage').mousedown(function(e) {
        var lastX = e.pageX;
        var lastY = e.pageY;


        $('#dicomImage').mousemove(function(e) {
            var deltaX = e.pageX - lastX,
                    deltaY = e.pageY - lastY ;
            lastX = e.pageX;
            lastY = e.pageY;

            var viewport = cornerstone.getViewport(element);
            viewport.centerX += (deltaX / viewport.scale);
            viewport.centerY += (deltaY / viewport.scale);
            cornerstone.setViewport(element, viewport);
        });

        $('#dicomImage').mouseup(function(e) {
            $('#dicomImage').unbind('mousemove');
        });
    });

    $('#dicomImage').on('mousewheel', function(e) {
        if(e.originalEvent.detail > 0 || e.originalEvent.wheelDelta < 0) { //alternative options for wheelData: wheelDeltaX & wheelDeltaY
            var viewport = cornerstone.getViewport(element);
            viewport.scale -= 0.25;
            cornerstone.setViewport(element, viewport);
        } else {
            var viewport = cornerstone.getViewport(element);
            viewport.scale += 0.25;
            cornerstone.setViewport(element, viewport);
        }
        //prevent page fom scrolling
        return false;
    });
</script>
</html>
